{"version":3,"sources":["../../../../server/graphql/mutations/usermeta/add.js"],"names":["type","args","token","name","data","resolve","root","params","decoded","Error","umModel","newUsermeta","save"],"mappings":";;;;;;AAAA;;AAKA;;AACA;;;;AACA;;;;kBAEe;AACdA,6BADc;AAEdC,OAAM;AACLC,SAAO;AACNC,SAAM,OADA;AAENH;AAFM,GADF;AAKLI,QAAM;AACLD,SAAM,MADD;AAELH,SAAM;AAFD;AALD,EAFQ;AAYdK,QAZc,mBAYNC,IAZM,EAYAC,MAZA,EAYQ;AACrB,MAAMC,UAAU,wBAAYD,OAAOL,KAAnB,CAAhB;AACA,MAAI,CAACM,OAAL,EAAc;AACb,SAAM,IAAIC,KAAJ,CAAU,eAAV,CAAN;AACA;AACD,MAAMC,UAAU,uBAAkBH,OAAOH,IAAzB,CAAhB;AACA,MAAMO,cAAcD,QAAQE,IAAR,EAApB;AACA,MAAI,CAACD,WAAL,EAAkB;AACjB,SAAM,IAAIF,KAAJ,CAAU,4BAAV,CAAN;AACA;AACD,SAAOE,WAAP;AACA;AAvBa,C","file":"add.js","sourcesContent":["import {\r\n\tGraphQLNonNull,\r\n\tGraphQLString\r\n} from 'graphql'\r\n\r\nimport { usermetaType, usermetaInputType } from '../../types/usermeta'\r\nimport UsermetaModel from '../../../models/usermeta'\r\nimport { verifyToken } from '../../../utils'\r\n\r\nexport default {\r\n\ttype: usermetaType,\r\n\targs: {\r\n\t\ttoken: {\r\n\t\t\tname: 'token',\r\n\t\t\ttype: GraphQLString\r\n\t\t},\r\n\t\tdata: {\r\n\t\t\tname: 'data',\r\n\t\t\ttype: new GraphQLNonNull(usermetaInputType)\r\n\t\t}\r\n\t},\r\n\tresolve(root, params) {\r\n\t\tconst decoded = verifyToken(params.token)\r\n\t\tif (!decoded) {\r\n\t\t\tthrow new Error('Invalid Token')\r\n\t\t}\r\n\t\tconst umModel = new UsermetaModel(params.data)\r\n\t\tconst newUsermeta = umModel.save()\r\n\t\tif (!newUsermeta) {\r\n\t\t\tthrow new Error('Error adding new blog post')\r\n\t\t}\r\n\t\treturn newUsermeta\r\n\t}\r\n}\r\n"]}